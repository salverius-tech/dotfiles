# Docker aliases - loaded only when docker is installed
# Managed by chezmoi

# =============================================================================
# Container Listing
# =============================================================================
alias dps=$'docker ps --format="table {{`{{.Names}}`}}\t{{`{{.ID}}`}}\t{{`{{.Image}}`}}\t{{`{{.RunningFor}}`}}\t{{`{{.State}}`}}\t{{`{{.Status}}`}}"'
alias dpsp=$'docker ps --format="table {{`{{.Names}}`}}\t{{`{{.ID}}`}}\t{{`{{.Image}}`}}\t{{`{{.RunningFor}}`}}\t{{`{{.State}}`}}\t{{`{{.Status}}`}}\t{{`{{.Ports}}`}}"'
alias dpsa='docker ps -a'

# =============================================================================
# Docker Compose
# =============================================================================
alias dc='docker compose'
alias dcu='docker compose up -d'
alias dcd='docker compose down'
alias dcl='docker compose logs -f'
alias dcr='docker compose restart'
alias dcp='docker compose pull'
alias dcb='docker compose build'
alias dce='docker compose exec'
alias dcps='docker compose ps'
alias dcconf='docker compose config'

# =============================================================================
# Container Operations
# =============================================================================
alias dlog='docker logs -f'
alias dlast='docker logs --tail 100'
alias dexec='docker exec -it'
alias dstop='docker stop'
alias drm='docker rm'

# =============================================================================
# Inspection
# =============================================================================
alias dins='docker inspect'
alias dip=$'docker inspect -f \'{{`{{range.NetworkSettings.Networks}}`}}{{`{{.IPAddress}}`}}{{`{{end}}`}}\''
alias dtop='docker stats --no-stream'
alias dwatch='docker stats'

# =============================================================================
# Images
# =============================================================================
alias di='docker images'
alias drmi='docker rmi'
alias dpull='docker pull'

# =============================================================================
# Network & Volumes
# =============================================================================
alias dnet='docker network ls'
alias dvol='docker volume ls'

# =============================================================================
# Cleanup
# =============================================================================
alias docker-prune='docker system prune -f'
alias docker-prune-all='docker system prune -af --volumes'

# =============================================================================
# Docker Shell Functions
# =============================================================================
# Shell into container
dsh() {
    docker exec -it "$1" /bin/sh
}

# Bash into container
dbash() {
    docker exec -it "$1" /bin/bash
}
